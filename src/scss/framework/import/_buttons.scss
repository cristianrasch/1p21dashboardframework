
/*  BUTTONS ***/

$prefix: '.btn';
@mixin button-generate-schemes($args:()){
    $defaults: (
        init: (
            border: '',
            background: '',
            color: '',
        ),
        hover: (
            border: '',
            background: '',
            color: '',
        ),
        active: (
            border: '',
            background: '',
            color: '',
        )
    );
    $opts: map-merge($defaults,$args);

    $selector: #{&};

    @each $state,$properties in $opts {

        @if $state == 'hover' {
            
        
            @at-root &:hover,
            #{$prefix}-group:not(#{$prefix}-group-toggle):hover &,
            
            &:focus,
            #{$prefix}-group:not(#{$prefix}-group-toggle):focus &,

            &.focus,
            #{$prefix}-group:not(#{$prefix}-group-toggle).focus &{
                @include internal-btn-set-scheme($properties)
            }
            // @at-root &:hover,
            // &:focus,
            // &:.focus {
            //     @include internal-btn-set-scheme($properties)
            // }

        }@else if $state == 'active' {
            @at-root &:active,
            &.active,
            #{$prefix}-group:not(#{$prefix}-group-toggle):active &,
            #{$prefix}-group:not(#{$prefix}-group-toggle).active & {
                @include internal-btn-set-scheme($properties);
            }
            
        }@else{
        
            @at-root & {
                @include internal-btn-set-scheme($properties)
            }
            &#{$prefix}-disabled:hover,
            &#{$prefix}-disabled:focus,
            &#{$prefix}-disabled.focus,
            &#{$prefix}-disabled:active,
            &#{$prefix}-disabled.active,

            &#{$prefix}-no-interaction:hover,
            &#{$prefix}-no-interaction:focus,
            &#{$prefix}-no-interaction.focus,
            &#{$prefix}-no-interaction:active,
            &#{$prefix}-no-interaction.active,
            
            #{$prefix}-group-disabled:hover &,
            #{$prefix}-group-disabled:focus &,
            #{$prefix}-group-disabled.focus &,
            #{$prefix}-group-disabled:active &,
            #{$prefix}-group-disabled.active & {
                @include internal-btn-set-scheme($properties,true);
            }
        }
    }

}

@mixin internal-btn-set-scheme($properties,$add-important: false) {


    $important: '';

    @if $add-important {

        $important: '!important';
    }

    @if map-get($properties,border) {
        border-color: map-get($properties,border) #{$important};
    }

    @if map-get($properties,background) {
        background: map-get($properties,background) #{$important};
    }

    @if map-get($properties,color) {
        color: map-get($properties,color) #{$important};
    }

}


#{$prefix} {
    @include type-set((
        size: em($btn-font-size / $body-font-size),
        leading: strip-unit($btn-line-height / $btn-font-size),
        weight: $btn-font-weight,
        style: $btn-font-style,
        font: $btn-font-family,
        align:center,
        decoration:none,
        case: $btn-text-transform,
    ));
    // overflow:hidden;
    padding-top: calc(  (  (#{$btn-height} - (#{$btn-border-width} * 2)) - (1em * #{ type-lead( $btn-font-size,$btn-line-height ) }) ) * .5 );
    padding-bottom: calc(  (  (#{$btn-height} - (#{$btn-border-width} * 2)) - (1em * #{ type-lead( $btn-font-size,$btn-line-height ) }) ) * .5 );
    padding-right: em($btn-gutter / $btn-font-size);
    padding-left: em($btn-gutter / $btn-font-size);
    display:inline-block;
    vertical-align: middle;
    background:none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    max-width:100%;
    border: $btn-border-width solid transparent;
    transition: $transition-duration-short all $transition-timing;

    &-group,
    :not(#{$prefix}-group) > & {
        box-shadow: $btn-box-shadow;

        &:hover {
            box-shadow: $btn-box-shadow-hover;
        }
    }

    &,&-group {
        border-radius: $btn-border-radius;
    }

    &#{$prefix}-no-shadow,
    &#{$prefix}-link {
        box-shadow:none!important;
    }

    &-block {
        display:block;
        width:100%;
    }


    &-disabled,
    #{$prefix}-group-disabled & {
        opacity: .5;
        cursor:no-drop;
    }

    &#{$prefix}-large,
    #{$prefix}-group#{$prefix}-large & {
        font-size: em($btn-font-size-large / $body-font-size);
        padding-top: calc(  (  (#{$btn-height-large} - (#{$btn-border-width} * 2)) - (1em * #{ type-lead($btn-font-size,$btn-line-height) }) ) * .5 );
        padding-bottom: calc(  (  (#{$btn-height-large} - (#{$btn-border-width} * 2)) - (1em * #{ type-lead($btn-font-size,$btn-line-height) }) ) * .5 );

        border-radius: $btn-border-radius-large;
    }

    &#{$prefix}-small,
    #{$prefix}-group#{$prefix}-small & {
        font-size: em($btn-font-size-small / $body-font-size);
        padding-top: calc(  (  (#{$btn-height-small} - (#{$btn-border-width} * 2)) - (1em * #{ type-lead($btn-font-size,$btn-line-height) }) ) * .5 );
        padding-bottom: calc(  (  (#{$btn-height-small} - (#{$btn-border-width} * 2)) - (1em * #{ type-lead($btn-font-size,$btn-line-height) }) ) * .5 );

        padding-right: em($btn-gutter-small / $btn-font-size-small);
        padding-left: em($btn-gutter-small / $btn-font-size-small);
        
        border-radius: $btn-border-radius-small;
    }

    &-symbol {
        width: $btn-height;
        padding-left:0;
        padding-right:0;

        .symbol {
            margin-left:auto;
            margin-right:auto;
        }
    }
    .symbol {
        &:last-child {
            margin-left: .25em;
        }
        &:first-child {
            margin-right: .25em;
        }
    }

    &-group {
        display:inline-flex;
        overflow:hidden;

        &#{$prefix}-large {
            border-radius: $btn-border-radius-large;
        }

        &#{$prefix}-small {
            border-radius: $btn-border-radius-small;
        }

        &#{&}-horizontal {
            max-width:100%;
            

            #{$prefix}:nth-last-child(n+2) {
                border-top-right-radius: 0;
                border-bottom-right-radius: 0;
            }

            #{$prefix}:nth-child(n+2) {
                border-top-left-radius: 0;
                border-bottom-left-radius: 0;

                &,&:hover {
                    border-left-color: $btn-group-separator-color;
                }
            }
        }

        &#{&}-vertical {
            flex-direction:column;

            #{$prefix}:nth-last-child(n+2) {
                border-bottom-right-radius: 0;
                border-bottom-left-radius: 0;
            }

            #{$prefix}:nth-child(n+2) {
                border-top-right-radius: 0;
                border-top-left-radius: 0;

                &,&:hover {
                    border-bottom-color: $btn-group-separator-color;
                }
            }
        }
    }

    @each $scheme,$properties in $btn-schemes {
        &-#{$scheme} {
            @include button-generate-schemes($properties);
        }
    }
}